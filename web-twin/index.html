<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pendulum Digital Twin</title>
  </head>
  <body>
    <div id="app">
      <div id="pendulum-container" class="disconnected">
        <div id="loading-spinner" class="loading-spinner">
          <div class="spinner"></div>
          <span>Waiting for connection...</span>
        </div>
      </div>
      <div id="info-panel">
        <h1>Pendulum Digital Twin</h1>
        <div id="status">Connecting...</div>
        
        <div id="stats">
          <div class="stat-box">
            <span class="stat-label">Angle</span>
            <span id="angle-value" class="stat-value">0.0</span>¬∞
          </div>
          <div class="stat-box">
            <span class="stat-label">Velocity</span>
            <span id="velocity-value" class="stat-value">0.0</span>¬∞/s
          </div>
          <div class="stat-box queue-box">
            <span class="stat-label">Queue</span>
            <span id="queue-value" class="stat-value">0</span>
          </div>
        </div>
        
        <div id="position-display">
          <div class="position-header">
            <span class="stat-label">Cart Position</span>
            <span id="position-value">0</span>
          </div>
          <div class="position-track">
            <div class="limit-indicator left" id="limit-left"></div>
            <div class="position-marker" id="position-marker"></div>
            <div class="limit-indicator right" id="limit-right"></div>
          </div>
          <div class="position-labels">
            <span>‚Üê Left Limit</span>
            <span>Right Limit ‚Üí</span>
          </div>
        </div>

        <div id="controls">
          <h2>Controls</h2>
          
          <div class="control-row">
            <button id="btn-left" class="control-btn" data-cmd="L">‚Üê Left</button>
            <button id="btn-right" class="control-btn" data-cmd="R">Right ‚Üí</button>
          </div>
          
          <div class="control-row">
            <button id="btn-oscillate" class="control-btn hold-btn" data-cmd-start="O" data-cmd-stop="S">
              ‚Üï Oscillate
            </button>
          </div>
          
          <div class="control-row">
            <button id="btn-swingup" class="control-btn hold-btn accent" data-cmd-start="W" data-cmd-stop="S">
              ‚ö° Swing Up
            </button>
          </div>
          
          <div class="control-row">
            <button id="btn-stop" class="control-btn stop-btn" data-cmd="S">
              ‚èπ Stop
            </button>
          </div>
          
          <div class="control-row">
            <button id="btn-upload" class="control-btn upload-btn">
              üì§ Upload Arduino Code
            </button>
          </div>
          <div id="upload-status"></div>
        </div>

        <div id="config">
          <h2>Configuration</h2>
          
          <div class="config-section">
            <h3>Manual Mode</h3>
            <div class="slider-row">
              <label>Speed</label>
              <input type="range" id="cfg-manual-speed" min="1000" max="50000" value="10000" data-cfg="MS">
              <span class="slider-value" id="val-manual-speed">10000</span>
            </div>
            <div class="slider-row">
              <label>Accel</label>
              <input type="range" id="cfg-manual-accel" min="1000" max="50000" value="20000" data-cfg="MA">
              <span class="slider-value" id="val-manual-accel">20000</span>
            </div>
            <div class="slider-row">
              <label>Step</label>
              <input type="range" id="cfg-manual-step" min="100" max="10000" value="500" data-cfg="MT">
              <span class="slider-value" id="val-manual-step">500</span>
            </div>
          </div>
          
          <div class="config-section">
            <h3>Oscillate Mode</h3>
            <div class="slider-row">
              <label>Speed</label>
              <input type="range" id="cfg-osc-speed" min="1000" max="50000" value="5000" data-cfg="OS">
              <span class="slider-value" id="val-osc-speed">5000</span>
            </div>
            <div class="slider-row">
              <label>Accel</label>
              <input type="range" id="cfg-osc-accel" min="1000" max="50000" value="10000" data-cfg="OA">
              <span class="slider-value" id="val-osc-accel">10000</span>
            </div>
            <div class="slider-row">
              <label>Amplitude</label>
              <input type="range" id="cfg-osc-step" min="100" max="10000" value="1000" data-cfg="OT">
              <span class="slider-value" id="val-osc-step">1000</span>
            </div>
          </div>
          
          <div class="config-section">
            <h3>Swing-Up Mode</h3>
            <div class="slider-row">
              <label>Speed</label>
              <input type="range" id="cfg-swing-speed" min="1000" max="50000" value="20000" data-cfg="WS">
              <span class="slider-value" id="val-swing-speed">20000</span>
            </div>
            <div class="slider-row">
              <label>Accel</label>
              <input type="range" id="cfg-swing-accel" min="1000" max="50000" value="15000" data-cfg="WA">
              <span class="slider-value" id="val-swing-accel">15000</span>
            </div>
            <div class="slider-row">
              <label>Kp Gain</label>
              <input type="range" id="cfg-swing-kp" min="5" max="200" value="40" data-cfg="WK">
              <span class="slider-value" id="val-swing-kp">40</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
